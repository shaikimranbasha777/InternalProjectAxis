package com.axis.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.axis.entity.Alphabet;
import com.axis.entity.Customer;
import com.axis.repository.CustomerRepository;

@Service
public class CustomerServiceImple implements CustomerService {

	@Autowired
	CustomerRepository customerRepository;
	
	
	Alphabet alphabet;
	
	
	
	@SuppressWarnings("null")
	@Override
	public StringBuilder generatePassword(Customer customer) {
		
		StringBuilder pass = new StringBuilder("");
		
		StringBuilder pool = new StringBuilder();
		
		if(customer.getIsUpperCaseInclude()) pool.append(alphabet.UPPERCASE_LETTERS);
		
		if(customer.getIsLowerCaseInclude()) pool.append(alphabet.LOWERCASE_LETTERS);
		
		if(customer.getIsNumbersInclude()) pool.append(alphabet.NUMBERS);
		
		if(customer.getIsSpecialCharectersInclude()) pool.append(alphabet.SYMBOLS);
		
		String str = pool.toString();
		
		int alphabetLength = str.length();
		
		 int max = alphabetLength - 1;
	     int min = 0;
	     int range = max - min + 1;
		
		for(int i=0;i<customer.getPasswordLength();i++) {
			int index = (int) (Math.random() * range) + min;
            pass.append(str.charAt(index));
		}
		
		return pass;
	}

}
